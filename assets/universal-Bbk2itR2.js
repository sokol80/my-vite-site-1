(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();console.log("Универсальный скрипт загружен");document.addEventListener("DOMContentLoaded",async()=>{await l("header-placeholder","components/header.html"),await l("footer-placeholder","components/footer.html"),await new Promise(e=>setTimeout(e,100)),a(),d(),m(),u(),g(),c()});async function l(e,n){const s=document.getElementById(e);if(!s){console.warn(`Элемент с ID "${e}" не найден`);return}try{console.log(`Попытка загрузки компонента: ${n}`);const t=await fetch(n);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const o=await t.text();return s.innerHTML=o,console.log(`Компонент ${n} успешно загружен`),new Promise(r=>{requestAnimationFrame(()=>{requestAnimationFrame(r)})})}catch(t){console.error(`Ошибка загрузки компонента ${n}:`,t)}}function c(){console.log("Инициализация анимаций");const e=document.querySelectorAll(".animate-element");console.log(`Найдено анимированных элементов: ${e.length}`),e.forEach(t=>{t.style.opacity="0",t.style.transform="translateY(30px)",t.style.transition="opacity 0.6s ease, transform 0.6s ease"});const n={threshold:.1,rootMargin:"0px 0px -50px 0px"},s=new IntersectionObserver(t=>{t.forEach(o=>{o.isIntersecting&&(setTimeout(()=>{o.target.style.opacity="1",o.target.style.transform="translateY(0)"},100),s.unobserve(o.target))})},n);e.forEach(t=>{s.observe(t)}),setTimeout(()=>{document.querySelectorAll(".hero .animate-element").forEach((o,r)=>{setTimeout(()=>{o.style.opacity="1",o.style.transform="translateY(0)"},200+r*150)})},300)}function a(){console.log("Инициализация навигации");const e=document.querySelectorAll("nav a[href]");console.log(`Найдено навигационных ссылок: ${e.length}`);const n=window.location.pathname;console.log(`Текущий путь: ${n}`),e.forEach(s=>{const t=s.getAttribute("href");(n==="/"&&(t==="/"||t==="./index.html"||t==="index.html")||n.includes("/about")&&t.includes("about")||n.includes("/blog")&&t.includes("blog")||n.includes("/contact")&&t.includes("contact"))&&s.classList.add("active")})}function d(){console.log("Инициализация мобильного меню");const e=document.querySelector(".mobile-toggle"),n=document.querySelector(".main-nav");if(console.log("Mobile toggle:",e),console.log("Main nav:",n),!e||!n){console.log("Элементы мобильного меню не найдены");return}e.addEventListener("click",()=>{n.classList.toggle("active"),e.classList.toggle("active")}),n.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{n.classList.remove("active"),e.classList.remove("active")})})}function m(){console.log("Инициализация переключателя темы");const e=document.querySelector(".theme-toggle");if(console.log("Theme toggle:",e),!e){console.log("Переключатель темы не найден");return}const n=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",n),e.addEventListener("click",()=>{const t=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)})}function u(){console.log("Инициализация плавной прокрутки"),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",s=>{const t=n.getAttribute("href");if(t==="#")return;const o=document.querySelector(t);o&&(s.preventDefault(),o.scrollIntoView({behavior:"smooth",block:"start"}))})})}function g(){console.log("Инициализация кнопки «Наверх»");const e=document.createElement("button");e.innerHTML="↑",e.className="scroll-to-top",e.style.cssText=`
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 3rem;
    height: 3rem;
    border: none;
    border-radius: 50%;
    background: var(--primary-color, #007bff);
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  `,document.body.appendChild(e),console.log("Кнопка «Наверх» создана"),window.addEventListener("scroll",()=>{window.pageYOffset>300?(e.style.opacity="1",e.style.visibility="visible"):(e.style.opacity="0",e.style.visibility="hidden")}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}
