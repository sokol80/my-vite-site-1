(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();console.log("Универсальный скрипт загружен");document.addEventListener("DOMContentLoaded",async()=>{const s=window.location.pathname==="/"||window.location.pathname.endsWith("/index.html")?"./":"../";await c("header-placeholder",`${s}src/components/header.html`),await c("footer-placeholder",`${s}src/components/footer.html`),await new Promise(t=>setTimeout(t,100)),d(),m(),u(),f(),g(),a()});async function c(e,s){const t=document.getElementById(e);if(!t){console.warn(`Элемент с ID "${e}" не найден`);return}try{console.log(`Попытка загрузки компонента: ${s}`);const n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const o=await n.text();return t.innerHTML=o,console.log(`Компонент ${s} успешно загружен`),new Promise(r=>{requestAnimationFrame(()=>{requestAnimationFrame(r)})})}catch(n){if(console.error(`Ошибка загрузки компонента ${s}:`,n),s.includes("./src/")){const o=s.replace("./","/");try{console.log(`Пробуем альтернативный путь: ${o}`);const r=await fetch(o);if(r.ok){const l=await r.text();return t.innerHTML=l,console.log(`Компонент загружен через альтернативный путь: ${o}`),new Promise(i=>{requestAnimationFrame(()=>{requestAnimationFrame(i)})})}}catch(r){console.error("Альтернативный путь тоже не сработал:",r)}}}}function a(){console.log("Инициализация анимаций");const e=document.querySelectorAll(".animate-element");e.forEach(n=>{n.style.opacity="0",n.style.transform="translateY(30px)",n.style.transition="opacity 0.6s ease, transform 0.6s ease"});const s={threshold:.1,rootMargin:"0px 0px -50px 0px"},t=new IntersectionObserver(n=>{n.forEach(o=>{o.isIntersecting&&(setTimeout(()=>{o.target.style.opacity="1",o.target.style.transform="translateY(0)"},100),t.unobserve(o.target))})},s);e.forEach(n=>{t.observe(n)}),setTimeout(()=>{document.querySelectorAll(".hero .animate-element").forEach((o,r)=>{setTimeout(()=>{o.style.opacity="1",o.style.transform="translateY(0)"},r*200)})},300),console.log(`Найдено анимированных элементов: ${e.length}`)}function d(){console.log("Инициализация навигации");const e=window.location.pathname,s=document.querySelectorAll(".nav-link");console.log(`Найдено навигационных ссылок: ${s.length}`),console.log(`Текущий путь: ${e}`),s.forEach(t=>{t.classList.remove("active");const n=t.getAttribute("href");(e==="/"&&n==="/"||e==="/index.html"&&n==="/"||e.startsWith(n)&&n!=="/")&&(t.classList.add("active"),console.log(`Активная ссылка: ${n}`))})}function m(){console.log("Инициализация мобильного меню");const e=document.querySelector(".mobile-menu-toggle"),s=document.querySelector(".main-nav");console.log("Mobile toggle:",e),console.log("Main nav:",s),e&&s?(e.addEventListener("click",t=>{t.stopPropagation(),e.classList.toggle("active"),s.classList.toggle("active"),console.log("Мобильное меню переключено")}),document.addEventListener("click",t=>{t.target.closest("header")||(e.classList.remove("active"),s.classList.remove("active"))}),console.log("Мобильное меню инициализировано")):console.warn("Элементы мобильного меню не найдены")}function u(){console.log("Инициализация переключателя темы");const e=document.querySelector(".theme-toggle");if(console.log("Theme toggle:",e),localStorage.getItem("theme")==="dark"&&(document.body.classList.add("dark"),e)){const t=e.querySelector("i");t&&(t.className="fas fa-sun")}e?(e.addEventListener("click",()=>{document.body.classList.toggle("dark");const t=e.querySelector("i");document.body.classList.contains("dark")?(t&&(t.className="fas fa-sun"),localStorage.setItem("theme","dark")):(t&&(t.className="fas fa-moon"),localStorage.setItem("theme","light")),console.log("Тема переключена")}),console.log("Переключатель темы инициализирован")):console.warn("Переключатель темы не найден")}function f(){console.log("Инициализация плавной прокрутки"),document.addEventListener("click",function(e){var s;if(e.target.matches("a[href^='#']")){e.preventDefault();const t=e.target.getAttribute("href"),n=document.querySelector(t);if(n){const o=((s=document.querySelector("header"))==null?void 0:s.offsetHeight)||0,r=n.offsetTop-o-20;window.scrollTo({top:r,behavior:"smooth"}),console.log(`Плавная прокрутка к ${t}`)}}})}function g(){if(console.log("Инициализация кнопки 'Наверх'"),document.querySelector(".scroll-to-top")){console.log("Кнопка 'Наверх' уже существует");return}const e=document.createElement("button");e.className="scroll-to-top",e.innerHTML='<i class="fas fa-arrow-up"></i>',e.setAttribute("aria-label","Наверх"),document.body.appendChild(e),window.addEventListener("scroll",()=>{window.pageYOffset>300?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"}),console.log("Прокрутка наверх")}),console.log("Кнопка 'Наверх' создана")}
